<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="kr.co.wheelingcamp.manage.model.mapper.ManageMapper">
	
	<select id="selectAllMember">
		SELECT ROWNUM, MEMBER_NO, MEMBER_ID, MEMBER_EMAIL, MEMBER_NICK_NAME, MEMBER_ADDRESS, MEMBER_ENROLL_DATE, MEMBER_DEL_FL, MEMBER_NAME, MEMBER_PHONE_NO, TO_CHAR(MEMBER_BIRTH,'YYYY-MM-DD') MEMBER_BIRTH, LICENSE
		FROM (SELECT MEMBER_NO, MEMBER_ID, MEMBER_EMAIL, MEMBER_NICK_NAME, MEMBER_ADDRESS, MEMBER_ENROLL_DATE, MEMBER_DEL_FL, MEMBER_NAME, MEMBER_PHONE_NO, MEMBER_BIRTH, LICENSE  
		FROM MEMBER 
			<!-- 가입순 -->
			<if test="sortNo == 0">
				ORDER BY 
				MEMBER_ENROLL_DATE DESC
			</if>
			
			<!-- 이름순 -->
			<if test="sortNo == 1">
				ORDER BY 
				MEMBER_NAME ASC,
				MEMBER_NO DESC
			</if>
			
			<!-- 자격증 있는 회원 조회 -->
			<if test="sortNo == 2">
				ORDER BY 
				LICENSE DESC,
				MEMBER_NAME ASC,
				MEMBER_NO DESC
			</if>
			
			<!-- 탈퇴 회원 조회-->
			<if test="sortNo == 3">
				WHERE MEMBER_DEL_FL = 'Y'
				ORDER BY 
				MEMBER_ENROLL_DATE DESC 
			</if>)
		
	</select>
	
	<select id="selectOneMember">
		SELECT MEMBER_NO, MEMBER_ID, MEMBER_EMAIL, MEMBER_NICK_NAME, MEMBER_ADDRESS, MEMBER_ENROLL_DATE, MEMBER_DEL_FL, MEMBER_NAME, MEMBER_PHONE_NO, TO_CHAR(MEMBER_BIRTH,'YYYY-MM-DD') MEMBER_BIRTH, LICENSE
		FROM MEMBER 
		WHERE MEMBER_NO = #{memberNo}
	</select>
	
	<!-- *********************************************************************************** -->
	
	<!-- 모든 차 목록 탐색 -->
	<select id="selectCarAll">
		SELECT DISTINCT ITEM_NO, CATEGORY_NAME, ITEM_VIEW_COUNT , CAR_NAME , CAR_GRADE_NO, 
				CAR_GRADE_NAME, CAR_SLEEP_CAPACITY , CAR_PASSENGERS , CAR_RENT_PRICE , CAR_FUEL , 
				IMG_PATH || IMG_RENAME "THUMBNAIL"
		FROM CAR C
		JOIN CAR_GRADE USING(CAR_GRADE_NO)
		JOIN ITEM USING (ITEM_NO)
		JOIN ITEM_CATEGORY USING (CATEGORY_CODE)
		LEFT JOIN (SELECT * FROM ITEM_IMG WHERE IMG_ORDER = 0) USING(ITEM_NO)
		LEFT JOIN CAR_STOCK USING (ITEM_NO)
		WHERE CATEGORY_CODE = 1
		ORDER BY ITEM_NO
	</select>

  	<!--모든 캠핑용품 목록 탐색 -->
	<select id="selectCampEquipmentAll">
		SELECT ITEM_NO, CATEGORY_CODE, CATEGORY_NAME, ITEM_VIEW_COUNT,
				EQUIPMENT_CATEGORY_CODE, EQUIPMENT_CATEGORY_NAME, EQUIPMENT_NAME,
				EQUIPMENT_RENT_PRICE, EQUIPMENT_RENT_COUNT,
				EQUIPMENT_SELL_PRICE, EQUIPMENT_SELL_COUNT,
				IMG_PATH || IMG_RENAME "THUMBNAIL"
		FROM CAMP_EQUIPMENT
		JOIN EQUIPMENT_CATEGORY USING (EQUIPMENT_CATEGORY_CODE)
		JOIN ITEM USING (ITEM_NO)
		JOIN ITEM_CATEGORY USING (CATEGORY_CODE)
		LEFT JOIN (SELECT * FROM ITEM_IMG WHERE IMG_ORDER = 0) USING(ITEM_NO)
		ORDER BY ITEM_NO
	</select>
	
	<!-- 모든 패키지 목록 탐색 -->
	<select id="selectPackageAll">
		SELECT I.ITEM_NO, I.CATEGORY_CODE, CATEGORY_NAME, ITEM_VIEW_COUNT ,
				P.PACKAGE_PRICE, P.PACKAGE_NAME,
				IMG_PATH || IMG_RENAME "THUMBNAIL"
		FROM PACKAGE P
		JOIN ITEM I ON (P.PACKAGE_NO = I.ITEM_NO)
		JOIN ITEM_CATEGORY IC ON (IC.CATEGORY_CODE = I.CATEGORY_CODE)
		LEFT JOIN (SELECT * FROM ITEM_IMG WHERE IMG_ORDER = 0) II ON (P.PACKAGE_NO = II.ITEM_NO)
		ORDER BY ITEM_NO
	</select>
	
	<!-- *********************************************************************************** -->
	
</mapper>
