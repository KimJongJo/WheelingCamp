<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="kr.co.wheelingcamp.interest.model.mapper.InterestMapper">

	<!-- 대여 차량 목록 -->
	<select id="rentalCarList">
		SELECT CART_NO, ITEM_NO, (CAR_NAME) ITEM_NAME, (CAR_RENT_PRICE) PRICE
		FROM "INTEREST"
		JOIN "ITEM" USING (ITEM_NO)
		JOIN "CAR" USING (ITEM_NO)
		WHERE SALE_TYPE = 1
		AND MEMBER_NO = #{memberNo}
		AND CATEGORY_CODE = 1
	</select>
	
	<!-- 대여 상품 목록 -->
	<select id="rentalList1">
		SELECT CART_NO, ITEM_NO, (EQUIPMENT_NAME) ITEM_NAME, (EQUIPMENT_RENT_PRICE)PRICE
		FROM "INTEREST"
		JOIN "ITEM" USING (ITEM_NO)
		JOIN "CAMP_EQUIPMENT" USING (ITEM_NO)
		WHERE SALE_TYPE = 1
		AND MEMBER_NO = #{memberNo}
		AND CATEGORY_CODE = 2
	</select>
	
		<!-- 패키지 대여 리스트 -->
	<select id="rentalList2">
		SELECT CART_NO, (PACKAGE_NO) ITEM_NO, (PACKAGE_NAME) ITEM_NAME, (PACKAGE_PRICE)PRICE
		FROM "INTEREST"
		JOIN "PACKAGE" ON (PACKAGE_NO = ITEM_NO)
		JOIN "ITEM" USING(ITEM_NO)
		WHERE MEMBER_NO = #{memberNo}
		AND SALE_TYPE = 1
		AND CATEGORY_CODE = 3
	</select>
	
	
	<!-- 구매 상품 목록 -->
	<select id="shoppingItemList">
		SELECT CART_NO, ITEM_NO, (EQUIPMENT_NAME) ITEM_NAME, (EQUIPMENT_SELL_PRICE)PRICE
		FROM "INTEREST"
		JOIN "ITEM" USING (ITEM_NO)
		JOIN "CAMP_EQUIPMENT" USING (ITEM_NO)
		WHERE SALE_TYPE = 2
		AND MEMBER_NO = #{memberNo}
		AND CATEGORY_CODE = 2
	</select>
	
	<!-- 관심상품 삭제 -->
	<delete id="itemDelete">
		DELETE FROM "INTEREST"
		WHERE ITEM_NO = #{itemNo}
		AND SALE_TYPE = #{type}
		AND MEMBER_NO = #{memberNo}
	</delete>
	
		<!-- 선택된 상품 전체 삭제 -->
	<delete id="checkListDelete">
		DELETE FROM "INTEREST"
		WHERE MEMBER_NO = #{memberNo}
		AND SALE_TYPE = #{type}
		AND ITEM_NO IN
			<foreach collection="checkes" item="i" open="(" close=")" separator=", ">
				#{i}
			</foreach>
	</delete>

</mapper>
